import { Story, Preview, Meta } from '@storybook/addon-docs/blocks';

<Meta title="Estándar de desarrollo Front-end/Guía para el desarrollo de código Frontend" />

# Guía para el desarrollo de código Frontend

Esta guía ha sido formulada con el propósito de estandarizar el desarrollo Frontend,
a través de herramientas que ayuden a acelerar y mejorar el proceso de creación de código web como lo son Pug, 
TypeScript y SCSS.

## HTML

### Sintaxis
- Utiliza 2 espacios (soft tab) / 1 tab (hard tab) para indentar.
- El doctype por defecto será HTML5: doctype html
- Usa doble comilla " (double quote) para abrir y cerrar atributos, aunque el estándar no lo requiera.
- Prefiere atributos simples en los que su valor sea el mismo del atributo, por ejemplo:


`Evita: <input required="required" />`

`Prefiere: <input required />`

Agrega un salto de línea vacío antes de comenzar un nuevo bloque de elementos que sean importantes para mantener legibilidad en el código fuente.

~~~
doctype html
   html(lang='es')
					
    head
     meta(charset='utf-8')
     meta(name='viewport', content='width=device-width, initial-scale=1')
						
    link(rel='stylesheet', href='css/main.min.css')
~~~

### Encabezado

En todo archivo .pug que corresponda a un template de una o varias páginas se incluirá dentro de las 
primeras líneas del mismo el siguiente encabezado a modo de comentario oculto, el cual deberá ser llenado 
por el desarrollador a cargo del proyecto ó que esté realizando el template:

~~~
//-

* Nombre proyecto:
* Fecha inicio:
* Email desarrollador:
* Descripción: 
* Dependencias: 
* Dónde se utiliza/requiere: 

~~~

### Comentarios

Comenta grandes bloques de secciones de la siguiente manera (mayúsculas):


`// NOMBRE SECCION`

Para comentarios menores, de orden local o para recordar o mencionar algo, con Pug utiliza //- ya que se emitirá al compilar a HTML:

`//- clearfix`


### Compatibilidad IE

El modo Edge de Internet Explorer debe ser explícitamente declarado dentro de las etiquetas `<head></head>`:

~~~
head
    meta(http-equiv='X-UA-Compatible' content='IE=Edge')
    title
~~~

### Etiquetas inline
Al utilizar Pug y de ser necesario colocar texto dentro de etiquetas, comúnmente se utilizan barras | (pipes) para separar texto plano de 
etiquetas inline anidadas (como strong ó em). En lo posible evitar el uso de estas 
barras colocando el texto seguido de la etiqueta bloque que la contenga y utilizando HTML para etiquetas inline, como en el siguiente ejemplo:

~~~
// Evita
     p 
     | Lorem ipsum 
     strong dolor si amet.
	  
// Prefiere
    p Lorem ipsum <strong> dolor si amet.</strong>
~~~


### Clases y concatenación

Clases CSS serán concatenadas inmediatamente unas luego de otras y antes de alguna declaración de atributos:

`a.list-item.active(href='')`
 

### Etiquetas con auto-cierre

En el caso de utilizar etiquetas HTML que se cierren a sí mismas (como en el caso de  deja un espacio al final antes del / cierre:

~~~
// Evita:
<img src="chanfle.jpg"/>

// Prefiere:
<img src="chanfle.jpg" />
~~~
 
### Semántica y accesibilidad

Para estructurar el contenido se utiliza como base el seccionamiento de HTML5: section, nav, aside, article, main, header, footer.
Para mayor y mejor accesibilidad se agregarán roles ARIA que le agregarán sentido a áreas específicas de cada página. Más detalles en sección WAI-ARIA de este mismo.


### Atributos de input accesibles
Para ayudar la accesibilidad en dispositivos móviles, se recomienda el uso del atributo type para la etiqueta `<input />` con valores orientados al uso del valor de esta etiqueta, según el listado a continuación:

- search
- email
- url
- tel
- number
- range
- date
- month
- week
- time
- datetime
- color
 

### Favicons
Para todo proyecto responsive se considerarán las siguientes etiquetas y tamaños para ícons/favicons:

~~~						
<!-- Para iPad con retina en iOS ≥ 7: -->
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="/assets/images/favicon-152.png">

<!-- Para iPad con retina en iOS ≤ 6: -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/images/favicon-144.png">

<!-- Para iPhone con retina en iOS ≥ 7: -->
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="/assets/images/favicon-120.png">

<!-- Para iPhone con retina en iOS ≤ 6: -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/assets/images/favicon-114.png">

<!-- Para primera y segunda generación de iPad: -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/assets/images/favicon-72.png">

<!-- Para no-retina iPhone, iPod Touch, y Android 2.1+ devices: -->
<link rel="apple-touch-icon-precomposed" href="/assets/images/favicon-57.png">

<!-- Fallback -->
<link rel="icon" href="/assets/images/favicon-32.png" sizes="32x32">
<link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico">

<!-- IE10 Metro icon (cambiar color #FFFFFF) -->
<meta name="msapplication-TileColor" content="#FFFFFF">
<meta name="msapplication-TileImage" content="/path/to/favicon-144.png">								
 
y en .pug
 

link(rel='apple-touch-icon-precomposed', sizes='152x152', href='/assets/images/favicon-152.png')
link(rel='apple-touch-icon-precomposed', sizes='144x144', href='/assets/images/favicon-144.png')
link(rel='apple-touch-icon-precomposed', sizes='120x120', href='/assets/images/favicon-120.png')
link(rel='apple-touch-icon-precomposed', sizes='114x114', href='/assets/images/favicon-114.png')
link(rel='apple-touch-icon-precomposed', sizes='72x72', href='/assets/images/favicon-72.png')
link(rel='apple-touch-icon-precomposed', href='/assets/images/favicon-57.png')
link(rel='icon', href='/assets/images/favicon-32.png', sizes='32x32')
link(rel='icon', type='image/x-icon', href='/assets/images/favicon.ico')
meta(name='msapplication-TileColor', content='#FFFFFF')
meta(name='msapplication-TileImage', content='/path/to/favicon-144.png')
~~~


### Social Meta / Opengraph

Para mejor indexación por sistemas de redes sociales, y en los proyectos que lo ameritan, se debe integrar las etiquetas 
`<meta>` correspondientes a Opengraph y Twitter Cards y orientadas a e-commerce como se muestran a continuación:

~~~
<!-- Twitter Cards -->
<meta name="twitter:site" content="@TWITTER_USERNAME" />
<meta name="twitter:creator" content="@TWITTER_USERNAME" />
<meta name="twitter:card" content="product" />
<meta name="twitter:label1" content="price" />
<meta name="twitter:data1" content="$PRECIO" />
<meta name="twitter:label2" content="brand" />
<meta name="twitter:data2" content="MARCA" />
<meta name="twitter:image" content="http://URL_IMAGEN_500X500PX">

<!-- OpenGraph -->

<meta property="og:site_name" content="NOMBRE_SITIO" />
<meta property="og:url" content="http://URL_SITIO/PRODUCTO" />
<meta property="og:title" content="TITULO_PRODUCTO" />
<meta property="og:description" content="DESCRIPCION_MAX_180_CARACTS" />
<meta property="og:image" content="http://URL_IMAGEN_500X500PX" />
<meta property="og:type" content="product" />
<meta property="og:price:amount" content="PRECIO" />
<meta property="og:price:currency" content="MONEDA" />
<meta property="og:availability" content="DISPONIBILIDAD('instock','oos','pending)" />
<meta property="fb:app_id"  content="ID_APP_FB" /> 
			
y en .pug
 
// Twitter Cards
meta(name='twitter:site', content='@TWITTER_USERNAME')
meta(name='twitter:creator', content='@TWITTER_USERNAME')
meta(name='twitter:card', content='product')
meta(name='twitter:label1', content='price')
meta(name='twitter:data1', content='$PRECIO')
meta(name='twitter:label2', content='brand')
meta(name='twitter:data2', content='MARCA')
meta(name='twitter:image', content='http://URL_IMAGEN_500X500PX')

// OpenGraph

meta(property='og:site_name', content='NOMBRE_SITIO')
meta(property='og:url', content='http://URL_SITIO/PRODUCTO')
meta(property='og:title', content='TITULO_PRODUCTO')
meta(property='og:description', content='DESCRIPCION_MAX_180_ARACTERES')
meta(property='og:image', content='http://URL_IMAGEN_500X500PX')
meta(property='og:type', content='product')
meta(property='og:price:amount', content='PRECIO')
meta(property='og:price:currency', content='MONEDA')
meta(property='og:availability', content="DISPONIBILIDAD('instock','oos','pending)")
meta(property='fb:app_id', content='ID_APP_FB')
~~~


#### Links:
[https://cards-dev.twitter.com/validator](Validador Twitter Cards)
[https://developers.facebook.com/tools/debug/](Facebook Debugger)
 

### Boilerplate & Workflow
Como base para todos los nuevos proyectos web en I2B, se propone el uso de un boilerplate que contiene los elementos 
mínimos necesarios para iniciar el templating de cualquier proyecto, entre ellos:

#### Gulp
- SCSS (CSS pre-processor)
- Pug (HTML pre-processor)
- mixins básicos
- jQuery.js
- CSS3 
- Estructura de carpetas estándar

[https://github.com/I2BLab/front-component](I2B Frontend WorkFlow >)



## CSS
 

### Inclusión
El(los) archivo(s) CSS debe(n) ser incluído(s) en las páginas HTML que correspondan a su uso lo más cerca posible del 
cierre de la etiqueta `</head>`. En HTML5 ya no hay necesidad de utilizar el atributo type ya que es el servidor que se encarga de 
determinar el correcto MIME type.

~~~
Encabezado
/* ===========
* Proyecto:
* Fecha Inicio:
* Email Desarrollador:
* ======== */
~~~

### Sintaxis
Utiliza 2 espacios (soft tab) / 1 tab (hard tab) para indentar.

 
### Pre-processing
Utilizamos SCSS como pre-processor para CSS.
Privilegia el uso de mixins y funciones, pero no abuses. Evita utilizar @extend ya que puede importar mucho código innecesario si mal utilizado.
No indentes más de 3 niveles de especificidad
Guarda valores repetitivos en variables con nomenclatura clara. Recuerda que puedes crear scope para la misma variable.
Agrega un salto de línea vacío antes de comenzar un nuevo elemento o declaración de elementos para mantener legibilidad en el código fuente:

~~~
selector {
	propiedad: valor;
}

otroselector {
	propiedad1: valor1;
	propiedad2: valor2;
}
~~~
						
Si defines estilos para más de un selector hijo, sepáralos con un salto de línea:

~~~							
selector {
	propiedad: valor;
	  
	.selector-hijo {
	
		selector2 {
			propiedad1: valor1;
			propiedad2: valor2;

			&:hover {
				propiedad: valor;
			}
		}
	}
}
~~~

Si defines estilos para más de un mismo selector, usa saltos de líneas entre ellos:

~~~
selector1,
selector2 {
	propiedad: valor;
}
~~~

### Declaraciones

Privilegia el orden de tus declaraciones en el siguiente orden:

- display / modelo de caja
- posicionamiento
- fuente/tipografía
- colores
- otros
 
~~~
selector {
	display: block;
	width: 100px;
	height: 100px;
	position: absolute;
	top: 0;
	left: 0;
	font-family: sans-serif;
	line-height: 1.5em;
	background: black;
	cursor: pointer;
}
~~~

### Unidades y colores      
 
~~~
// Bien
padding: 0;

// Evita
padding: 0px;
~~~							

Omite el 0 si este se encuentra a la izquierda del valor:

~~~					
// Bien
margin: .5em;

// Evita
margin: 0.5em;
~~~
					
Define todos los colores como variables y sus matices con operaciones como darken() y lighten(), por ejemplo:

 ~~~
$alerta: #f00; // rojo
$alertaHover: darken($alerta, 20%); // 20% más rojo oscuro
~~~

En caso de tener colores en hexacromía prefiere resumirlos con sólo 3 caracteres:

~~~
// Bien
color: #f00;

// Evita
color: #ff0000;
~~~
				
### Comentarios

Comenta grandes bloques de secciones de la siguiente manera (mayúsculas):
 
~~~
/* -----------
 * HOME
 * -------- */
~~~
								
Para comentarios menores, de orden local o para recordar algo, con pre-processors utiliza // ya que se emitirá al compilar a CSS:

~~~					
// cambio de color al :target
~~~
					
### Especificidad

Utiliza la menor cantidad de selectores requeridos para darle estilo a un elemento; privilegia el uso de clases.
Si utilizas clases o ID's, evita agregar el selector:

~~~											
// Bien
.clase {}

// Evita
selector.clase {}
~~~				
				
### Nomenclatura de clases y ID's
Si manipulas elementos HTML con JavaScript, utiliza el atributo HTML5 data- para identificarlo y definir/guardar su valor. Si prefieres utilizar clases, utiliza el prefijo js- sólo si se utilizarán para tal propósito y no para darle estilo:

~~~					
// Bien
<etiqueta data-value="value" />
<etiqueta class="js-abrirmodal" />
~~~
															
Crea nombre de clases que sean descriptivas al contexto y/o función que cumple el elemento más que en su apariencia:

~~~
// Bien
.modal {}
.titulo {}

// Evita
.grande {}
.rojo {}
~~~
				
Evita el uso de ID's, salvo si necesario para tests unitarios (Selenium y otros). 

### Media Queries
 
Declara @media queries al final del archivo CSS, donde se definan modificaciones al comportamiento/estilo de elementos ya declarados.

En proyectos de gran volumen con participación de más de un desarrollador frontend sobre el mismo, se recomienda utilizar diferentes hojas de estilos para cada @media y que cada uno trabaje sobre diferentes archivos bajo un mismo HTML compartiendo la estructura responsive:
 
~~~
link(rel='stylesheet', media='screen and (min-width: 701px) and (max-width: 900px)', href='css/main.css')
~~~
 


### Herencia de estilos

Cuida la herencia de estilos y evita el selector de hijo directo > y utilízalo sólo si necesario (por ejemplo, cuando quieres alcanzar varios selectores hijos que no necesitan tener una clase declarada):

~~~
<article class='article-link'>
  <div class='box-vote'>
    <button class='add'></button>
    <button class='rest'></button>
    <span class='count'></span>
  </div>

  <h3 class='title'>Article title</h3>
  <p class='count'>3 votes</p>
</article>

. article-link {
  .title 	{ /* ... */ }
  > .count { /* ... */ }
}
~~~
En este caso si no definieras .article-link > .count este estilo lo habría heredado .box-vote .count.